# DDALAB Production Configuration Example
# Copy this to .env and customize for production deployment
# cp .env.example .env

#=============================================================================
# DEPLOYMENT SETTINGS - Core deployment configuration
#=============================================================================
DDALAB_ENVIRONMENT=production
DDALAB_DEBUG=false
DDALAB_SERVICE_NAME=ddalab
DDALAB_INSTITUTION_NAME=DDALAB

#=============================================================================
# API SERVER - FastAPI backend configuration
#=============================================================================
DDALAB_API_HOST=0.0.0.0
DDALAB_API_PORT=8001
DDALAB_RELOAD=false

#=============================================================================
# DATABASE - PostgreSQL configuration
#=============================================================================
DDALAB_DB_HOST=localhost
DDALAB_DB_PORT=5432
DDALAB_DB_NAME=ddalab
DDALAB_DB_USER=admin
DDALAB_DB_PASSWORD=ddalab_password
# Legacy variable names for Docker Compose compatibility
DB_USER=ddalab
DB_PASSWORD=ddalab
DB_NAME=ddalab

#=============================================================================
# AUTHENTICATION - Security configuration
#=============================================================================
DDALAB_AUTH_MODE=local
DDALAB_JWT_SECRET_KEY=MUST_CHANGE_IN_PRODUCTION_32_CHARS_MIN
DDALAB_JWT_ALGORITHM=HS256
DDALAB_TOKEN_EXPIRATION_MINUTES=10080
DDALAB_REFRESH_TOKEN_EXPIRE_DAYS=7

#=============================================================================
# STORAGE - MinIO object storage and file system
#=============================================================================
DDALAB_MINIO_HOST=localhost:9000
DDALAB_MINIO_ACCESS_KEY=minioadmin
DDALAB_MINIO_SECRET_KEY=minioadmin
DDALAB_MINIO_BUCKET_NAME=dda-results
# Docker Compose MinIO credentials (should match access key/secret)
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin
DDALAB_DATA_DIR=../../data
DDALAB_ALLOWED_DIRS=../../data
DDALAB_ANONYMIZE_EDF=true

#=============================================================================
# CACHE - Redis configuration
#=============================================================================
DDALAB_REDIS_HOST=redis
DDALAB_REDIS_PORT=6379
DDALAB_REDIS_DB=0
DDALAB_REDIS_PASSWORD=
DDALAB_REDIS_USE_SSL=false
DDALAB_PLOT_CACHE_TTL=3600

#=============================================================================
# DDA ENGINE - Analysis engine configuration
#=============================================================================
DDALAB_DDA_BINARY_PATH=../../bin/run_DDA_ASCII
DDALAB_MAX_CONCURRENT_TASKS=10
DDALAB_TASK_TIMEOUT=600

#=============================================================================
# MONITORING - Observability configuration
#=============================================================================
DDALAB_OTLP_HOST=jaeger
DDALAB_OTLP_PORT=4318

#=============================================================================
# DOCKER COMPOSE VARIABLES
# These variables are used by docker-compose.yml and are derived from DDALAB_ variables
#=============================================================================

# Database (mapped from DDALAB_DB_*)
POSTGRES_USER=${DDALAB_DB_USER}
POSTGRES_PASSWORD=${DDALAB_DB_PASSWORD}
POSTGRES_DB=${DDALAB_DB_NAME}

# MinIO (mapped from DDALAB_MINIO_*)
MINIO_ROOT_USER=${DDALAB_MINIO_ACCESS_KEY}
MINIO_ROOT_PASSWORD=${DDALAB_MINIO_SECRET_KEY}

# Additional service configuration
WEB_PORT=3000
TRAEFIK_PASSWORD_HASH=MUST_CHANGE_IN_PRODUCTION
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=MUST_CHANGE_IN_PRODUCTION

#=============================================================================
# WEB FRONTEND - Next.js configuration
#=============================================================================
NEXT_PUBLIC_API_URL=http://localhost:8001
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=${DDALAB_JWT_SECRET_KEY}

#=============================================================================
# DEVELOPMENT OVERRIDES
# ConfigManager and local development can override these
#=============================================================================

# Local development overrides (uncomment for local dev):
# DDALAB_ENVIRONMENT=development
# DDALAB_DEBUG=true
# DDALAB_RELOAD=true
# DDALAB_AUTH_MODE=local
# DDALAB_DB_HOST=localhost
# DDALAB_MINIO_HOST=localhost:9000
# DDALAB_REDIS_HOST=localhost
# DDALAB_DATA_DIR=./data
# DDALAB_ALLOWED_DIRS=./data,/tmp
# DDALAB_DDA_BINARY_PATH=../../bin/run_DDA_ASCII
