% Simplified DDALAB Architecture Diagram for Paper
% Can be included directly in your paper with \input{architecture_simple.tex}

\begin{figure}[htbp]
\centering
\begin{tikzpicture}[
    node distance=1.2cm,
    box/.style={rectangle, draw, rounded corners, minimum width=2.2cm, minimum height=0.8cm, text centered, font=\scriptsize},
    bigbox/.style={rectangle, draw, rounded corners, minimum width=2.8cm, minimum height=1cm, text centered, font=\small, fill=white, thick},
    layer/.style={rectangle, draw, thick, rounded corners, inner sep=8pt},
    arrow/.style={-{Stealth[scale=1]}, thick},
    bidiarrow/.style={<->{Stealth[scale=1]}, thick},
]

\definecolor{tauri}{RGB}{255, 199, 6}
\definecolor{rust}{RGB}{206, 92, 0}
\definecolor{docker}{RGB}{0, 182, 255}
\definecolor{fastapi}{RGB}{0, 150, 136}

% LEFT: Standalone
\node[font=\small\bfseries] at (-4, 5) {Standalone Mode};

\node[bigbox, fill=tauri!30] (ui-left) at (-4, 3.8) {Tauri Desktop};
\node[bigbox, fill=rust!30] (api-left) at (-4, 2.3) {Embedded Rust API};
\node[box, fill=gray!20] (files-left) at (-4, 0.8) {Local Files};

\draw[bidiarrow] (ui-left) -- (api-left);
\draw[bidiarrow] (api-left) -- (files-left);

\begin{scope}[on background layer]
    \node[layer, fill=blue!5, fit={(ui-left) (api-left) (files-left)}, label={[font=\scriptsize]below:\textit{User's Computer}}] {};
\end{scope}

% RIGHT: Institutional
\node[font=\small\bfseries] at (4, 5) {Institutional Mode};

\node[bigbox, fill=tauri!30] (ui-right) at (4, 3.8) {Tauri Desktop};
\node[box, fill=docker!30] (proxy) at (4, 2.8) {Traefik};
\node[bigbox, fill=fastapi!30] (api-right) at (4, 1.8) {FastAPI Server};
\node[box, fill=gray!20] (services) at (4, 0.5) {PostgreSQL/Redis/MinIO};

\draw[bidiarrow] (ui-right) -- (proxy);
\draw[bidiarrow] (proxy) -- (api-right);
\draw[bidiarrow] (api-right) -- (services);

\begin{scope}[on background layer]
    \node[layer, fill=docker!5, fit={(proxy) (api-right) (services)}, label={[font=\scriptsize]below:\textit{Institutional Server}}] {};
\end{scope}

% Common features
\node[text width=8cm, font=\scriptsize, align=center] at (0, -0.5) {
    \textbf{Shared:} Custom EDF Reader • DDA Analysis • Visualization • State Persistence
};

\end{tikzpicture}
\caption{DDALAB hybrid architecture supporting standalone desktop deployment with embedded Rust API (left) and institutional deployment with containerized FastAPI server (right).}
\label{fig:architecture}
\end{figure}
